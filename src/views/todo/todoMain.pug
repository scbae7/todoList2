doctype html
html(lang="ko")
  head
    link(rel="icon" href="../images/list.svg")
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title TODO LIST
    link(rel="stylesheet", href="../css/reset.css")
    link(rel="stylesheet", href="../css/common.css")
    link(rel="stylesheet", href="../css/todo.css")
    link(rel="stylesheet", href="../css/todoForm.css")
  body
    include ../modal/todoModal/addTodoModal.pug
    include ../modal/todoModal/deleteTodoModal.pug
    include ../modal/todoModal/detailModal.pug
    .container.todoContainer
      .navSection
        button.tagSearchBtn # 
          span 태그로 검색
        button.myPaegBtn
          span.myPageIcon
          span MY
        a(href="/user/login") 
          button.logout LOG OUT
      .processSection
        .processLabel 진행률
        .processNumber#progressNumber
        .processBar
          .barFull 
            span.barNumber#barNumber
      .headerSection
        .headerTitle
          span.headerIcon
          span TODO LIST
        if (userName)
            .headerHello= userName + '님 안녕하세요'
        else
            .headerHello 회원 이름이 없어
      .todoHeader
          .todoCont TODO
          .addCont#openModalBtn + NEW
          .DoneCont DONE  
      .todoSection
        each todo in todos
          if (todo)
            .todoRow(data-todoNum=todo.todo_num, class=(todo.status === '대기 중' ? 'waiting' : 'done'))
              - if (todo.due_date)
                - var dueDate = new Date(todo.due_date);
                - var formattedDueDate = dueDate.toLocaleDateString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit' });
                .rowDate= formattedDueDate
              - if (todo.todolist_cont)
                .rowDesc= todo.todolist_cont
              .rowTag
                - if (todo.todo_tag)
                  each tag in todo.todo_tag.split(',')
                    span.rowTagData= tag.trim()
              button.rowControl
                  span.rowControlIcon
              .rowBtns
                button
                  span.doneBtn
                button
                  span.editBtn
                button
                  span.deleteBtn
                button
                  span.closeBtn
          else
            .todoRow 없어
    script(src="../js/modal.js")
    //- script(src="./js/validate/joinValidate.js" type="module")
    script(src="../js/validate.js" type="module")
    script(src="../js/todoData/addTodo.js")
    script(src="../js/todoData/deleteTodo.js" type="module")
    script(src="../js/filterTodo.js")
    script(src="../js/todoStatus.js")
    //- script(src="../js/todoData/todoDetail.js")
    script(src="../js/todoData/01.js")